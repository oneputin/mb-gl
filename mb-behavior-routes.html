<link rel="import" href="../polymer/polymer.html">

<script>
    Polymer.BehaviorRoutesImpl = {

        properties: {},

        // derive comparable/calculable times
        // from dates of type "2016.12.11,16.00" or "2016.12.16,16:00"
        utcTime: function(t, lonlat, unit) {
            // !! for parser the MONTH must be numbered 0 .. 11 !!
            var tlocal;
            if (typeof t == "string") {
                var t = t.replace(",", "."),
                    t = t.replace(":", "."),
                    a = t.split(".");
                tlocal = new Date(parseInt(a[0]), parseInt(a[1]) - 1, parseInt(a[2]), parseInt(a[3]), parseInt(a[4]));
            } else {
                tlocal = t;
            }

            var tg = tlocal,
                tunit = tg;

            if (unit == "h") tunit = tg / (1000 * 3600);
            else if (unit == "s") tunit = tg / 1000;
            else tunit = tg;

            return tunit;
        },

        // Create readable time period h:min
        deltaT: function(t, fallback) {
            var h = Math.floor(t),
                m = Math.round((t - h) * 60);
            if (h > 0) h = h < 10 ? "0" + h + "h" : h + "h";
            else h = "";
            m = (m < 10) ? "0" + m : m;
            return h || m ? h + m + "min" : fallback;
        },

        logTime: function(ms1970, sep) {
            if (!sep) sep = ", ";
            var logtime = new Date(ms1970);
            //  logtime = logtime.getDate() + "." + (logtime.getMonth() + 1) + ", " + logtime.getHours() + ":" + logtime.getMinutes();
            //  console.log(ms1970, logtime);

            var D = logtime.getDate(),
                D = D < 10 ? "0" + D : D,
                M = logtime.getMonth() + 1,
                M = M < 10 ? "0" + M : M,
                h = logtime.getHours(),
                h = h < 10 ? "0" + h : h,
                m = logtime.getMinutes(),
                m = m < 10 ? "0" + m : m;

            logtime = D + "." + M + sep + h + ":" + m;
            return logtime;
        }
    };

    /** @polymerBehavior */
    Polymer.BehaviorRoutes = [
        Polymer.BehaviorRoutesImpl
    ];
</script>