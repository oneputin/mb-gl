<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-slider/paper-slider.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="icons-svg.html">

<!--
`mb-orientation-ctrl`
ctrl to toglle map-orientation

@demo demo/routemap.html 
-->

<dom-module id="mb-orientation-ctrl">

    <template>
    
    	<style type="text/css">
	        .ctrlbox {
                @apply(--layout-horizontal);
                @apply(--layout-center);
	        }
            
            paper-icon-button.green {
                --paper-icon-button-ink-color: var(--paper-orange-500);
                background-color: var(--paper-light-green-500);
                color: white;
                border-radius: 3px;
                padding: 2px;
                margin: 5px; 
            }

    	</style>
	
		<div class="ctrlbox"> 

            <paper-icon-button id="trackmapctrl" icon="{{_icon}}" title="trackmode" class="green"></paper-icon-button>

	    </div>

    </template>

    <script>
        Polymer({
            is: 'mb-orientation-ctrl',

            properties: {

                /**
                 * trackmap (align-bearing) otherwise North
                 */
                trackmap: {
                    type: Boolean,
                    value: false,
                    notify: true,
                    observer: 'controlupdate'
                },

                _icon: {
                    type: String,
                    value: "ctrl:near-me"
                }
            },

            observers: [],

            ready: function() {
                this.setupCtrls();
            },

            controlupdate: function(trackmap) {
                // console.log("toggle ctrl-icon into trackmapmode=", trackmapmode);
                // icon must reflect the alternative action to actual.
                // to trigger with next click 
                this._icon = trackmap ? "language" : "ctrl:near-me";
            },

            /**
             * Setup the Ctrl-actions (map-) 
             *
             */
            setupCtrls: function() {

                var ctrl3 = this.$.trackmapctrl;

                // Toggle trackmap
                ctrl3.addEventListener('click', function() {
                    this.trackmap = !this.trackmap;
                }.bind(this));

            }

        });
    </script>

</dom-module>